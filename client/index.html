<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title translate-key="appTitle">Chat in real time</title>
    <script src="js/theme/theme-shared.js"></script>
    <script src="js/theme/theme-loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icons/6.7.0/css/flag-icons.min.css">
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body>
    <div id="app-loader">
      <i class="fa-solid fa-circle-notch fa-spin"></i>
      <p id="loader-text">Loading...</p>
    </div>
    <script src="js/utils/loader-text.js"></script>
    <header class="header">
      <h1 translate-key="appTitle">Chat in real time</h1>
      <div class="header-right">
        <span class="online-users">
          <span translate-key="usersOnline">Online</span>: <span id="online-count">0</span>
        </span>
        <button class="settings-menu-button" aria-label="Menu">
          <span class="settings-menu-icon"></span>
          <span class="settings-menu-icon"></span>
          <span class="settings-menu-icon"></span>
        </button>
      </div>
    </header>
    <div id="typing-indicator" class="typing-indicator"></div>
    <main>
      <div class="chat-container">
        <div class="chat-messages" id="chat-messages">
          <!-- Messages will be dynamically inserted here -->
        </div>
        <form class="chat-input" id="chat-form" autocomplete="off">
          <input type="text" id="message-input" translate-key="messagePlaceholder" placeholder="Type a message..." autocomplete="off" maxlength="500">
          <span id="char-count" class="char-count"></span>
          <button type="submit" id="send-text" style="display:none;"><i class="fa-solid fa-paper-plane"></i></button>
          <button type="button" id="send-audio" title="Send audio"><i class="fa-solid fa-microphone"></i></button>
        </form>
      </div>
      <div id="settings-overlay" class="settings-overlay"></div>
      <div id="settings-modal" class="settings-modal">
        <div class="settings-header">
          <h2 translate-key="optionsTitle">Options</h2>
          <button class="close-button">&times;</button>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <h3 translate-key="preferences">Preferences</h3>
            <div class="option-group" style="margin-bottom:2rem;">
              <span translate-key="theme">Theme</span>
              <div class="button-group">
                <button class="button left" id="theme-light" translate-key="themeLight">Light</button>
                <button class="button middle" id="theme-dark" translate-key="themeDark">Dark</button>
                <button class="button right" id="theme-auto" translate-key="themeAuto">Automatic</button>
              </div>
            </div>
            <div class="option-group" style="margin-top:2rem; margin-bottom:2rem;">
              <span translate-key="fontSize">Tamaño de la letra</span>
              <div class="button-group">
                <button class="button left" id="font-size-small" translate-key="fontSizeSmall">Small</button>
                <button class="button middle" id="font-size-medium" translate-key="fontSizeMedium">Medium</button>
                <button class="button right" id="font-size-large" translate-key="fontSizeLarge">Large</button>
              </div>
            </div>
            <div class="option-group" style="margin-top:2rem;">
              <span translate-key="language">Language</span>
              <div class="button-group">
                <button id="button-es" class="button left">
                  <span class="fi fi-es"></span> Español
                </button>
                <button id="button-en" class="button right">
                  <span class="fi fi-gb"></span> English
                </button>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <h3 translate-key="notifications">Notifications</h3>
            <div class="option-group">
              <span translate-key="notificationVolume">Notification volume</span>
              <input type="range" id="volume-slider" min="0" max="100" value="50">
            </div>
            <div class="option-group" style="margin-top:2rem;">
              <span translate-key="showUnreadMessages">Show number of unread messages</span>
              <label class="switch">
                <input type="checkbox" id="toggle-number-unread-messages">
                <span class="slider round"></span>
              </label>
            </div>
          </div>
          <div class="settings-section">
            <h3 translate-key="privacy">Privacy</h3>
            <div class="option-group">
              <span translate-key="showOnlineStatus">Show online status</span>
              <label class="switch">
                <input type="checkbox" id="toggle-online-status">
                <span class="slider round"></span>
              </label>
            </div>
          </div>
        </div>
        <div class="settings-footer">
          <button class="logout-button" translate-key="logoutButton">Logout</button>
        </div>
      </div>
    </main>
    <div id="login-overlay" class="login-overlay"></div>
    <div id="login-modal" class="login-modal" aria-hidden="false" role="dialog" aria-labelledby="login-title">
      <div class="login-header">
        <h2 translate-key="loginTitle">Start chatting now!</h2>
      </div>
      <div class="login-content">
        <form id="login-form" class="login-form">
          <div class="login-section">
            <h3 translate-key="signInHeader">Sign in to continue</h3>
            <div class="login-buttons">
              <button type="button" id="login-google" class="login-button">
                <span class="fa-brands fa-google"></span> Google
              </button>
              <button type="button" id="login-github" class="login-button">
                <span class="fa-brands fa-github"></span> Github
              </button>
            </div>
            <h3 translate-key="createUsernameHeader">Create a username</h3>
            <div class="username">
              <input id="login-username" type="text" minlength="3" maxlength="20" translate-key="createUsernamePlaceholder" placeholder="Enter a username..." autocomplete="off">
              <button type="button" class="login-username-button" translate-key="createUsernameButton">Continue</button>
            </div>
            <h3 translate-key="guestHeader">Continue as a guest</h3>
            <button type="button" id="login-guest" class="login-button">
              <span class="fa-solid fa-user-secret"></span> <span translate-key="guestButton">Guest</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  <script type="module" src="js/chat.js"></script>
  <script type="module" src="js/settings/settings.js"></script>
  <script type="module" src="js/translations/translations-apply.js"></script>
  </body>
</html>